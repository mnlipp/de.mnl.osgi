<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>ServiceCollector (de.mnl.osgi.coreutils 1.0.4 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: de.mnl.osgi.coreutils, class: ServiceCollector">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/ServiceCollector.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">de.mnl.osgi.coreutils</a></div>
<h1 title="Class ServiceCollector" class="title">Class ServiceCollector&lt;S,<wbr>T&gt;</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">de.mnl.osgi.coreutils.ServiceCollector&lt;S,<wbr>T&gt;</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>S</code> - the type of the service</dd>
<dd><code>T</code> - the type of service instances returned by queries, 
      usually the same type as the type of the service
      (see <a href="#setServiceGetter(java.util.function.BiFunction)"><code>setServiceGetter(BiFunction)</code></a>)</dd>
</dl>
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/AutoCloseable.html" title="class or interface in java.lang" class="external-link">AutoCloseable</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name"><a href="../../../../src-html/de/mnl/osgi/coreutils/ServiceCollector.html#line-80">ServiceCollector</a>&lt;S,<wbr>T&gt;</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/AutoCloseable.html" title="class or interface in java.lang" class="external-link">AutoCloseable</a></span></div>
<div class="block">Maintains a collection of services matching some criteria.
 <P>
 An instance can be created with different criteria for matching
 services of a given type. While the instance is open, it 
 maintains a collection of all matching services provided
 by the framework. Changes of the collection are reported using
 the registered handlers.
 <P>
 Because OSGi is a threaded environment, the registered services 
 can vary any time. Results from queries on the collection are 
 therefore only reliable while synchronizing on the 
 <code>ServiceCollector</code> instance. The synchronization puts 
 other threads that attempt to change the collection on hold. 
 Note that this implies a certain risk of creating deadlocks.
 Also note that this does not prevent modifications by the
 holder of the lock.
 <P>
 Callbacks are always synchronized on this collector, else
 the state of the collector during the execution of the
 callback might no longer be the state that triggered
 the callback.
 <P>
 Instead of using the services from the framework directly,
 they may optionally be adapted to another type by setting a
 service getter function. The invocation of this function is 
 also synchronized on this collector.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>protected final <a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/BundleContext.html" title="class or interface in org.osgi.framework" class="external-link">BundleContext</a></code></div>
<div class="col-second even-row-color"><code><a href="#context" class="member-name-link">context</a></code></div>
<div class="col-last even-row-color">
<div class="block">The Bundle Context used by this <code>ServiceCollector</code>.</div>
</div>
<div class="col-first odd-row-color"><code>protected final <a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/Filter.html" title="class or interface in org.osgi.framework" class="external-link">Filter</a></code></div>
<div class="col-second odd-row-color"><code><a href="#filter" class="member-name-link">filter</a></code></div>
<div class="col-last odd-row-color">
<div class="block">The Filter used by this <code>ServiceCollector</code> which s
 pecifies the search criteria for the services to collect.</div>
</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(org.osgi.framework.BundleContext,java.lang.Class)" class="member-name-link">ServiceCollector</a><wbr>(<a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/BundleContext.html" title="class or interface in org.osgi.framework" class="external-link">BundleContext</a>&nbsp;context,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>&gt;&nbsp;clazz)</code></div>
<div class="col-last even-row-color">
<div class="block">Instantiates a new <code>ServiceCollector</code> that collects services
 of the specified class.</div>
</div>
<div class="col-constructor-name odd-row-color"><code><a href="#%3Cinit%3E(org.osgi.framework.BundleContext,java.lang.String)" class="member-name-link">ServiceCollector</a><wbr>(<a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/BundleContext.html" title="class or interface in org.osgi.framework" class="external-link">BundleContext</a>&nbsp;context,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;className)</code></div>
<div class="col-last odd-row-color">
<div class="block">Instantiates a new <code>ServiceCollector</code> that collects services
 on the specified class name.</div>
</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(org.osgi.framework.BundleContext,org.osgi.framework.Filter)" class="member-name-link">ServiceCollector</a><wbr>(<a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/BundleContext.html" title="class or interface in org.osgi.framework" class="external-link">BundleContext</a>&nbsp;context,
 <a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/Filter.html" title="class or interface in org.osgi.framework" class="external-link">Filter</a>&nbsp;filter)</code></div>
<div class="col-last even-row-color">
<div class="block">Instantiates a new <code>ServiceCollector</code> that collects services
 matches by the specified filter.</div>
</div>
<div class="col-constructor-name odd-row-color"><code><a href="#%3Cinit%3E(org.osgi.framework.BundleContext,org.osgi.framework.ServiceReference)" class="member-name-link">ServiceCollector</a><wbr>(<a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/BundleContext.html" title="class or interface in org.osgi.framework" class="external-link">BundleContext</a>&nbsp;context,
 <a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/ServiceReference.html" title="class or interface in org.osgi.framework" class="external-link">ServiceReference</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>&gt;&nbsp;reference)</code></div>
<div class="col-last odd-row-color">
<div class="block">Instantiates a new <code>ServiceCollector</code> that collects services
 on the specified service reference.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#close()" class="member-name-link">close</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Stops collecting services.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/SortedMap.html" title="class or interface in java.util" class="external-link">SortedMap</a>&lt;<a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/ServiceReference.html" title="class or interface in org.osgi.framework" class="external-link">ServiceReference</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>&gt;,<wbr><a href="ServiceCollector.html" title="type parameter in ServiceCollector">T</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#collected()" class="member-name-link">collected</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return a <code>SortedMap</code> of the <code>ServiceReference</code>s and service
 objects for all services collected by this <code>ServiceCollector</code>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isEmpty()" class="member-name-link">isEmpty</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return if this <code>ServiceCollector</code> is empty.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isOpen()" class="member-name-link">isOpen</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Checks if this <code>ServiceCollector</code> is open.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#modificationCount()" class="member-name-link">modificationCount</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the modification count for this <code>ServiceCollector</code>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#open()" class="member-name-link">open</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Starts collecting of service providers.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#open(boolean)" class="member-name-link">open</a><wbr>(boolean&nbsp;collectAllServices)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Starts collecting services.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#remove(org.osgi.framework.ServiceReference)" class="member-name-link">remove</a><wbr>(<a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/ServiceReference.html" title="class or interface in org.osgi.framework" class="external-link">ServiceReference</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>&gt;&nbsp;reference)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Remove a service from this <code>ServiceCollector</code>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">T</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#service()" class="member-name-link">service</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns a service object for one of the services collected by this
 <code>ServiceCollector</code>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">T</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#service(org.osgi.framework.ServiceReference)" class="member-name-link">service</a><wbr>(<a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/ServiceReference.html" title="class or interface in org.osgi.framework" class="external-link">ServiceReference</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>&gt;&nbsp;reference)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the service object for the specified <code>ServiceReference</code> 
 if the specified referenced service has been collected
 by this <code>ServiceCollector</code>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/ServiceReference.html" title="class or interface in org.osgi.framework" class="external-link">ServiceReference</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>&gt;&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#serviceReference()" class="member-name-link">serviceReference</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns a <code>ServiceReference</code> for one of the services collected
 by this <code>ServiceCollector</code>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/ServiceReference.html" title="class or interface in org.osgi.framework" class="external-link">ServiceReference</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>&gt;&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#serviceReferences()" class="member-name-link">serviceReferences</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return the current set of <code>ServiceReference</code>s for all services 
 collected by this <code>ServiceCollector</code>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">T</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#services()" class="member-name-link">services</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return the list of service objects for all services collected by this
 <code>ServiceCollector</code>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="ServiceCollector.html" title="class in de.mnl.osgi.coreutils">ServiceCollector</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>,<wbr><a href="ServiceCollector.html" title="type parameter in ServiceCollector">T</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setOnAdded(java.util.function.BiConsumer)" class="member-name-link">setOnAdded</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/function/BiConsumer.html" title="class or interface in java.util.function" class="external-link">BiConsumer</a>&lt;<a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/ServiceReference.html" title="class or interface in org.osgi.framework" class="external-link">ServiceReference</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>&gt;,<wbr><a href="ServiceCollector.html" title="type parameter in ServiceCollector">T</a>&gt;&nbsp;onAdded)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Sets a function to be called when a new service instance
 was added to the collection.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="ServiceCollector.html" title="class in de.mnl.osgi.coreutils">ServiceCollector</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>,<wbr><a href="ServiceCollector.html" title="type parameter in ServiceCollector">T</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setOnBound(java.util.function.BiConsumer)" class="member-name-link">setOnBound</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/function/BiConsumer.html" title="class or interface in java.util.function" class="external-link">BiConsumer</a>&lt;<a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/ServiceReference.html" title="class or interface in org.osgi.framework" class="external-link">ServiceReference</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>&gt;,<wbr><a href="ServiceCollector.html" title="type parameter in ServiceCollector">T</a>&gt;&nbsp;onBound)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Sets a function to be called when the first service 
 instance was added to the collection.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="ServiceCollector.html" title="class in de.mnl.osgi.coreutils">ServiceCollector</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>,<wbr><a href="ServiceCollector.html" title="type parameter in ServiceCollector">T</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setOnModfied(java.util.function.BiConsumer)" class="member-name-link">setOnModfied</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/function/BiConsumer.html" title="class or interface in java.util.function" class="external-link">BiConsumer</a>&lt;<a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/ServiceReference.html" title="class or interface in org.osgi.framework" class="external-link">ServiceReference</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>&gt;,<wbr><a href="ServiceCollector.html" title="type parameter in ServiceCollector">T</a>&gt;&nbsp;onModified)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Sets a function to be called when the preferred service
 changes.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="ServiceCollector.html" title="class in de.mnl.osgi.coreutils">ServiceCollector</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>,<wbr><a href="ServiceCollector.html" title="type parameter in ServiceCollector">T</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setOnRemoving(java.util.function.BiConsumer)" class="member-name-link">setOnRemoving</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/function/BiConsumer.html" title="class or interface in java.util.function" class="external-link">BiConsumer</a>&lt;<a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/ServiceReference.html" title="class or interface in org.osgi.framework" class="external-link">ServiceReference</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>&gt;,<wbr><a href="ServiceCollector.html" title="type parameter in ServiceCollector">T</a>&gt;&nbsp;onRemoving)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Sets a function to be called before one of the collected service
 instances becomes unavailable.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="ServiceCollector.html" title="class in de.mnl.osgi.coreutils">ServiceCollector</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>,<wbr><a href="ServiceCollector.html" title="type parameter in ServiceCollector">T</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setOnUnbinding(java.util.function.BiConsumer)" class="member-name-link">setOnUnbinding</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/function/BiConsumer.html" title="class or interface in java.util.function" class="external-link">BiConsumer</a>&lt;<a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/ServiceReference.html" title="class or interface in org.osgi.framework" class="external-link">ServiceReference</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>&gt;,<wbr><a href="ServiceCollector.html" title="type parameter in ServiceCollector">T</a>&gt;&nbsp;onUnbinding)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Sets a function to be called before the last of the collected 
 service instances becomes unavailable.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="ServiceCollector.html" title="class in de.mnl.osgi.coreutils">ServiceCollector</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>,<wbr><a href="ServiceCollector.html" title="type parameter in ServiceCollector">T</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setServiceGetter(java.util.function.BiFunction)" class="member-name-link">setServiceGetter</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/function/BiFunction.html" title="class or interface in java.util.function" class="external-link">BiFunction</a>&lt;<a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/BundleContext.html" title="class or interface in org.osgi.framework" class="external-link">BundleContext</a>,<wbr><a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/ServiceReference.html" title="class or interface in org.osgi.framework" class="external-link">ServiceReference</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>&gt;,<wbr><a href="ServiceCollector.html" title="type parameter in ServiceCollector">T</a>&gt;&nbsp;serviceGetter)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Sets the service getter function.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#size()" class="member-name-link">size</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return the number of services collected by this
 <code>ServiceCollector</code>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#toString()" class="member-name-link">toString</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">T</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#waitForService(long)" class="member-name-link">waitForService</a><wbr>(long&nbsp;timeout)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Wait for at least one service to be collected by this
 <code>ServiceCollector</code>.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="context">
<h3>context</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/BundleContext.html" title="class or interface in org.osgi.framework" class="external-link">BundleContext</a></span>&nbsp;<span class="element-name"><a href="../../../../src-html/de/mnl/osgi/coreutils/ServiceCollector.html#line-84">context</a></span></div>
<div class="block">The Bundle Context used by this <code>ServiceCollector</code>.</div>
</section>
</li>
<li>
<section class="detail" id="filter">
<h3>filter</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/Filter.html" title="class or interface in org.osgi.framework" class="external-link">Filter</a></span>&nbsp;<span class="element-name"><a href="../../../../src-html/de/mnl/osgi/coreutils/ServiceCollector.html#line-89">filter</a></span></div>
<div class="block">The Filter used by this <code>ServiceCollector</code> which s
 pecifies the search criteria for the services to collect.</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(org.osgi.framework.BundleContext,java.lang.Class)">
<h3>ServiceCollector</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name"><a href="../../../../src-html/de/mnl/osgi/coreutils/ServiceCollector.html#line-141">ServiceCollector</a></span><wbr><span class="parameters">(<a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/BundleContext.html" title="class or interface in org.osgi.framework" class="external-link">BundleContext</a>&nbsp;context,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>&gt;&nbsp;clazz)</span></div>
<div class="block">Instantiates a new <code>ServiceCollector</code> that collects services
 of the specified class.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>context</code> - the bundle context used to interact with the framework</dd>
<dd><code>clazz</code> - the clazz</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;(org.osgi.framework.BundleContext,org.osgi.framework.Filter)">
<h3>ServiceCollector</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name"><a href="../../../../src-html/de/mnl/osgi/coreutils/ServiceCollector.html#line-152">ServiceCollector</a></span><wbr><span class="parameters">(<a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/BundleContext.html" title="class or interface in org.osgi.framework" class="external-link">BundleContext</a>&nbsp;context,
 <a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/Filter.html" title="class or interface in org.osgi.framework" class="external-link">Filter</a>&nbsp;filter)</span></div>
<div class="block">Instantiates a new <code>ServiceCollector</code> that collects services
 matches by the specified filter.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>context</code> - the bundle context used to interact with the framework</dd>
<dd><code>filter</code> - the filter</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;(org.osgi.framework.BundleContext,org.osgi.framework.ServiceReference)">
<h3>ServiceCollector</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name"><a href="../../../../src-html/de/mnl/osgi/coreutils/ServiceCollector.html#line-173">ServiceCollector</a></span><wbr><span class="parameters">(<a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/BundleContext.html" title="class or interface in org.osgi.framework" class="external-link">BundleContext</a>&nbsp;context,
 <a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/ServiceReference.html" title="class or interface in org.osgi.framework" class="external-link">ServiceReference</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>&gt;&nbsp;reference)</span></div>
<div class="block">Instantiates a new <code>ServiceCollector</code> that collects services
 on the specified service reference.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>context</code> - the bundle context used to interact with the framework</dd>
<dd><code>reference</code> - the reference</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;(org.osgi.framework.BundleContext,java.lang.String)">
<h3>ServiceCollector</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name"><a href="../../../../src-html/de/mnl/osgi/coreutils/ServiceCollector.html#line-201">ServiceCollector</a></span><wbr><span class="parameters">(<a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/BundleContext.html" title="class or interface in org.osgi.framework" class="external-link">BundleContext</a>&nbsp;context,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;className)</span></div>
<div class="block">Instantiates a new <code>ServiceCollector</code> that collects services
 on the specified class name.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>context</code> - the bundle context used to interact with the framework</dd>
<dd><code>className</code> - the class name</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="setServiceGetter(java.util.function.BiFunction)">
<h3>setServiceGetter</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="ServiceCollector.html" title="class in de.mnl.osgi.coreutils">ServiceCollector</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>,<wbr><a href="ServiceCollector.html" title="type parameter in ServiceCollector">T</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../src-html/de/mnl/osgi/coreutils/ServiceCollector.html#line-240">setServiceGetter</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/function/BiFunction.html" title="class or interface in java.util.function" class="external-link">BiFunction</a>&lt;<a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/BundleContext.html" title="class or interface in org.osgi.framework" class="external-link">BundleContext</a>,<wbr><a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/ServiceReference.html" title="class or interface in org.osgi.framework" class="external-link">ServiceReference</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>&gt;,<wbr><a href="ServiceCollector.html" title="type parameter in ServiceCollector">T</a>&gt;&nbsp;serviceGetter)</span></div>
<div class="block">Sets the service getter function. Instead of simply getting the
 service from the bundle using the given <a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/ServiceReference.html" title="class or interface in org.osgi.framework" class="external-link"><code>ServiceReference</code></a>
 some additional processing may be performed such as adapting
 the service obtained to another interface.
 <P>
 A possible use case scenario for this feature consists of two 
 service types with different APIs but overlapping functionality.
 If the consumer needs only the common functionality, it
 may collect both service types and adapt the services obtained.
 <P>
 If the function returns <code>null</code>, no service is added
 to the collection. The function can thus also be used
 as a filter.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>serviceGetter</code> - the function</dd>
<dt>Returns:</dt>
<dd>the service collector</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setOnBound(java.util.function.BiConsumer)">
<h3>setOnBound</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="ServiceCollector.html" title="class in de.mnl.osgi.coreutils">ServiceCollector</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>,<wbr><a href="ServiceCollector.html" title="type parameter in ServiceCollector">T</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../src-html/de/mnl/osgi/coreutils/ServiceCollector.html#line-258">setOnBound</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/function/BiConsumer.html" title="class or interface in java.util.function" class="external-link">BiConsumer</a>&lt;<a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/ServiceReference.html" title="class or interface in org.osgi.framework" class="external-link">ServiceReference</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>&gt;,<wbr><a href="ServiceCollector.html" title="type parameter in ServiceCollector">T</a>&gt;&nbsp;onBound)</span></div>
<div class="block">Sets a function to be called when the first service 
 instance was added to the collection. The reference
 to the new service and the service instance are passed as 
 arguments.
 <P>
 The function is called before a callback set by 
 <a href="#setOnAdded(java.util.function.BiConsumer)"><code>setOnAdded(BiConsumer)</code></a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>onBound</code> - the function to be called</dd>
<dt>Returns:</dt>
<dd>the <code>ServiceCollector</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setOnAdded(java.util.function.BiConsumer)">
<h3>setOnAdded</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="ServiceCollector.html" title="class in de.mnl.osgi.coreutils">ServiceCollector</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>,<wbr><a href="ServiceCollector.html" title="type parameter in ServiceCollector">T</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../src-html/de/mnl/osgi/coreutils/ServiceCollector.html#line-272">setOnAdded</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/function/BiConsumer.html" title="class or interface in java.util.function" class="external-link">BiConsumer</a>&lt;<a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/ServiceReference.html" title="class or interface in org.osgi.framework" class="external-link">ServiceReference</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>&gt;,<wbr><a href="ServiceCollector.html" title="type parameter in ServiceCollector">T</a>&gt;&nbsp;onAdded)</span></div>
<div class="block">Sets a function to be called when a new service instance
 was added to the collection. The reference to the new 
 service and the service instance are passed as arguments.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>onAdded</code> - the function to be called</dd>
<dt>Returns:</dt>
<dd>the <code>ServiceCollector</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setOnRemoving(java.util.function.BiConsumer)">
<h3>setOnRemoving</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="ServiceCollector.html" title="class in de.mnl.osgi.coreutils">ServiceCollector</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>,<wbr><a href="ServiceCollector.html" title="type parameter in ServiceCollector">T</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../src-html/de/mnl/osgi/coreutils/ServiceCollector.html#line-286">setOnRemoving</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/function/BiConsumer.html" title="class or interface in java.util.function" class="external-link">BiConsumer</a>&lt;<a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/ServiceReference.html" title="class or interface in org.osgi.framework" class="external-link">ServiceReference</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>&gt;,<wbr><a href="ServiceCollector.html" title="type parameter in ServiceCollector">T</a>&gt;&nbsp;onRemoving)</span></div>
<div class="block">Sets a function to be called before one of the collected service
 instances becomes unavailable. The reference to the service to 
 be removed and the service instance are passed as arguments.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>onRemoving</code> - the function to call</dd>
<dt>Returns:</dt>
<dd>the <code>ServiceCollector</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setOnUnbinding(java.util.function.BiConsumer)">
<h3>setOnUnbinding</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="ServiceCollector.html" title="class in de.mnl.osgi.coreutils">ServiceCollector</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>,<wbr><a href="ServiceCollector.html" title="type parameter in ServiceCollector">T</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../src-html/de/mnl/osgi/coreutils/ServiceCollector.html#line-304">setOnUnbinding</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/function/BiConsumer.html" title="class or interface in java.util.function" class="external-link">BiConsumer</a>&lt;<a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/ServiceReference.html" title="class or interface in org.osgi.framework" class="external-link">ServiceReference</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>&gt;,<wbr><a href="ServiceCollector.html" title="type parameter in ServiceCollector">T</a>&gt;&nbsp;onUnbinding)</span></div>
<div class="block">Sets a function to be called before the last of the collected 
 service instances becomes unavailable. The reference to 
 the service to be removed and the service instance are 
 passed as arguments.
 <P>
 The function is called after a callback set by 
 <a href="#setOnRemoving(java.util.function.BiConsumer)"><code>setOnRemoving(BiConsumer)</code></a>).</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>onUnbinding</code> - the function to call</dd>
<dt>Returns:</dt>
<dd>the <code>ServiceCollector</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setOnModfied(java.util.function.BiConsumer)">
<h3>setOnModfied</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="ServiceCollector.html" title="class in de.mnl.osgi.coreutils">ServiceCollector</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>,<wbr><a href="ServiceCollector.html" title="type parameter in ServiceCollector">T</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../src-html/de/mnl/osgi/coreutils/ServiceCollector.html#line-323">setOnModfied</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/function/BiConsumer.html" title="class or interface in java.util.function" class="external-link">BiConsumer</a>&lt;<a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/ServiceReference.html" title="class or interface in org.osgi.framework" class="external-link">ServiceReference</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>&gt;,<wbr><a href="ServiceCollector.html" title="type parameter in ServiceCollector">T</a>&gt;&nbsp;onModified)</span></div>
<div class="block">Sets a function to be called when the preferred service
 changes. This may either be a change of the preferred service's
 properties (reported by the framework) or the replacement of
 the preferred service by another service. The service reference 
 to the modified service and the service are passed as arguments.
 <P>
 If the preferred service is replaced by another service, this
 function is called after the "onAdded" or "onRemoved" callback.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>onModified</code> - the function to call</dd>
<dt>Returns:</dt>
<dd>the <code>ServiceCollector</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="open()">
<h3>open</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../src-html/de/mnl/osgi/coreutils/ServiceCollector.html#line-345">open</a></span>()
          throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></span></div>
<div class="block">Starts collecting of service providers. Short for calling 
 <code>open(false)</code>.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - If the <code>BundleConetxt</code>
     with which this <code>ServiceCollector</code> was created is 
     no longer valid.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="open(boolean)">
<h3>open</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../src-html/de/mnl/osgi/coreutils/ServiceCollector.html#line-364">open</a></span><wbr><span class="parameters">(boolean&nbsp;collectAllServices)</span>
          throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></span></div>
<div class="block">Starts collecting services. Short for calling <code>open(false)</code>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>collectAllServices</code> - if <code>true</code>, then this 
     <code>ServiceCollector</code> will collect all matching services 
     regardless of class loader
     accessibility. If <code>false</code>, then 
     this <code>ServiceCollector</code> will only collect matching services 
     which are class loader
     accessible to the bundle whose <code>BundleContext</code> is 
     used by this <code>ServiceCollector</code>.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - If the <code>BundleConetxt</code>
     with which this <code>ServiceCollector</code> was created is no 
     longer valid.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="close()">
<h3>close</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../src-html/de/mnl/osgi/coreutils/ServiceCollector.html#line-584">close</a></span>()</div>
<div class="block">Stops collecting services.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/AutoCloseable.html#close()" title="class or interface in java.lang" class="external-link">close</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/AutoCloseable.html" title="class or interface in java.lang" class="external-link">AutoCloseable</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="waitForService(long)">
<h3>waitForService</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">T</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../src-html/de/mnl/osgi/coreutils/ServiceCollector.html#line-617">waitForService</a></span><wbr><span class="parameters">(long&nbsp;timeout)</span>
                           throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></span></div>
<div class="block">Wait for at least one service to be collected by this
 <code>ServiceCollector</code>. This method will also return when this
 <code>ServiceCollector</code> is closed from another thread.
 <p>
 It is strongly recommended that <code>waitForService</code> is not used 
 during the calling of the <code>BundleActivator</code> methods.
 <code>BundleActivator</code> methods are expected to complete in a short
 period of time.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>timeout</code> - The time interval in milliseconds to wait. If zero, the
     method will wait indefinitely.</dd>
<dt>Returns:</dt>
<dd>Returns the result of <a href="#service()"><code>service()</code></a>.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></code> - If another thread has interrupted the
     current thread.</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - If the value of timeout is negative.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="serviceReferences()">
<h3>serviceReferences</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/ServiceReference.html" title="class or interface in org.osgi.framework" class="external-link">ServiceReference</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>&gt;&gt;</span>&nbsp;<span class="element-name"><a href="../../../../src-html/de/mnl/osgi/coreutils/ServiceCollector.html#line-656">serviceReferences</a></span>()</div>
<div class="block">Return the current set of <code>ServiceReference</code>s for all services 
 collected by this <code>ServiceCollector</code>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the set.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="serviceReference()">
<h3>serviceReference</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/ServiceReference.html" title="class or interface in org.osgi.framework" class="external-link">ServiceReference</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>&gt;&gt;</span>&nbsp;<span class="element-name"><a href="../../../../src-html/de/mnl/osgi/coreutils/ServiceCollector.html#line-676">serviceReference</a></span>()</div>
<div class="block">Returns a <code>ServiceReference</code> for one of the services collected
 by this <code>ServiceCollector</code>.
 <p>
 If multiple services have been collected, the service with the highest
 ranking (as specified in its <code>service.ranking</code> property) is
 returned. If there is a tie in ranking, the service with the lowest
 service id (as specified in its <code>service.id</code> property); that is,
 the service that was registered first is returned. This is the same
 algorithm used by <code>BundleContext.getServiceReference</code>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>an optional <code>ServiceReference</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="service(org.osgi.framework.ServiceReference)">
<h3>service</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">T</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../src-html/de/mnl/osgi/coreutils/ServiceCollector.html#line-694">service</a></span><wbr><span class="parameters">(<a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/ServiceReference.html" title="class or interface in org.osgi.framework" class="external-link">ServiceReference</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>&gt;&nbsp;reference)</span></div>
<div class="block">Returns the service object for the specified <code>ServiceReference</code> 
 if the specified referenced service has been collected
 by this <code>ServiceCollector</code>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>reference</code> - the reference to the desired service.</dd>
<dt>Returns:</dt>
<dd>an optional service object</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="service()">
<h3>service</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">T</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../src-html/de/mnl/osgi/coreutils/ServiceCollector.html#line-710">service</a></span>()</div>
<div class="block">Returns a service object for one of the services collected by this
 <code>ServiceCollector</code>. This is effectively the same as 
 <code>serviceReference().flatMap(ref -&gt; service(ref))</code>.
 <P>
 The result value is cached, so refrain from implementing another
 cache in the invoking code.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>an optional service object</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="services()">
<h3>services</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">T</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../src-html/de/mnl/osgi/coreutils/ServiceCollector.html#line-732">services</a></span>()</div>
<div class="block">Return the list of service objects for all services collected by this
 <code>ServiceCollector</code>. This is effectively a mapping of
 <a href="#serviceReferences()"><code>serviceReferences()</code></a> to services.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>a list of service objects which may be empty</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="size()">
<h3>size</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name"><a href="../../../../src-html/de/mnl/osgi/coreutils/ServiceCollector.html#line-746">size</a></span>()</div>
<div class="block">Return the number of services collected by this
 <code>ServiceCollector</code>. This value may not be correct during the
 execution of handlers.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The number of services collected</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="modificationCount()">
<h3>modificationCount</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name"><a href="../../../../src-html/de/mnl/osgi/coreutils/ServiceCollector.html#line-771">modificationCount</a></span>()</div>
<div class="block">Returns the modification count for this <code>ServiceCollector</code>.
 
 The modification count is initialized to 0 when this 
 <code>ServiceCollector</code> is opened. Every time a service is added, 
 modified or removed from this <code>ServiceCollector</code>, 
 the modification count is incremented.
 <p>
 The modification count can be used to determine if this
 <code>ServiceCollector</code> has added, modified or removed a service by
 comparing a modification count value previously collected with the 
 current modification count value. If the value has not changed, 
 then no service has been added, modified or removed from this 
 <code>ServiceCollector</code> since the previous modification count 
 was collected.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The modification count for this <code>ServiceCollector</code> or
      -1 if this <code>ServiceCollector</code> is not open.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isOpen()">
<h3>isOpen</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../src-html/de/mnl/osgi/coreutils/ServiceCollector.html#line-780">isOpen</a></span>()</div>
<div class="block">Checks if this <code>ServiceCollector</code> is open.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true, if is open</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="collected()">
<h3>collected</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/SortedMap.html" title="class or interface in java.util" class="external-link">SortedMap</a>&lt;<a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/ServiceReference.html" title="class or interface in org.osgi.framework" class="external-link">ServiceReference</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>&gt;,<wbr><a href="ServiceCollector.html" title="type parameter in ServiceCollector">T</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../src-html/de/mnl/osgi/coreutils/ServiceCollector.html#line-796">collected</a></span>()</div>
<div class="block">Return a <code>SortedMap</code> of the <code>ServiceReference</code>s and service
 objects for all services collected by this <code>ServiceCollector</code>.
 The map is sorted in reverse natural order of <code>ServiceReference</code>.
 That is, the first entry is the service with the highest ranking and the
 lowest service id.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>A <code>SortedMap</code> with the <code>ServiceReference</code>s and
         service objects for all services collected by this
         <code>ServiceCollector</code>. If no services have been collected,
         then the returned map is empty.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isEmpty()">
<h3>isEmpty</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../src-html/de/mnl/osgi/coreutils/ServiceCollector.html#line-811">isEmpty</a></span>()</div>
<div class="block">Return if this <code>ServiceCollector</code> is empty.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd><code>true</code> if this <code>ServiceCollector</code> 
     has not collected any services.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="remove(org.osgi.framework.ServiceReference)">
<h3>remove</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../src-html/de/mnl/osgi/coreutils/ServiceCollector.html#line-824">remove</a></span><wbr><span class="parameters">(<a href="https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/ServiceReference.html" title="class or interface in org.osgi.framework" class="external-link">ServiceReference</a>&lt;<a href="ServiceCollector.html" title="type parameter in ServiceCollector">S</a>&gt;&nbsp;reference)</span></div>
<div class="block">Remove a service from this <code>ServiceCollector</code>.
 
 The specified service will be removed from this <code>ServiceCollector</code>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>reference</code> - The reference to the service to be removed.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="toString()">
<h3>toString</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name"><a href="../../../../src-html/de/mnl/osgi/coreutils/ServiceCollector.html#line-835">toString</a></span>()</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><div><!-- Optional footer data --><p id=githubfooter style="padding: 5px 6px; visibility: hidden">Hosted on GitHub Pages &mdash; <a href="https://github.com/site/terms" target="_top">Terms</a>&mdash; <a href="https://github.com/site/privacy" target="_top">Privacy</a></p><script type="text/javascript">if (location.hostname.indexOf("github") !== -1) {document.getElementById("githubfooter").style.visibility="visible";<!-- Matomo anonymous, no cookies (https://matomo.org/blog/2018/04/how-to-not-process-any-personal-data-with-matomo-and-what-it-means-for-you/) -->var _paq = _paq || [];/* tracker methods like "setCustomDimension" should be called before "trackPageView" */_paq.push(["setDocumentTitle", document.domain + "/" + document.title]);_paq.push(["setCookieDomain", "*.mnlipp.github.io"]);_paq.push(["setDomains", ["*.mnlipp.github.io"]]);_paq.push(['disableCookies']);_paq.push(['trackPageView']);_paq.push(['enableLinkTracking']);(function() {var u="//piwik.mnl.de/";_paq.push(['setTrackerUrl', u+'piwik.php']);_paq.push(['setSiteId', '14']);var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);})();<!-- End Matomo Code -->}</script><noscript><div>JavaScript is disabled on your browser, terms and privacy links may not be shown correctly.</div><!-- Matomo anonymous, no cookies (https://matomo.org/blog/2018/04/how-to-not-process-any-personal-data-with-matomo-and-what-it-means-for-you/) --><img src="https://piwik.mnl.de/piwik.php?idsite=14&amp;rec=1&amp;action_name=JGrapes" style="border:0" alt="" /><!-- End Matomo Code --></noscript></div></small></p>
</footer>
</div>
</div>
</body>
</html>
